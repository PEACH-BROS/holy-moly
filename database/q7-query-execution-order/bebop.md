# 쿼리 실행 순서에 대해 아는대로 말하세요.

### 쿼리 실행 과정

MySQL 기준 쿼리의 실행 과정은 다음과 같다.

1. 사용자가 요청한 SQL문장을 MySQL 서버가 이해할 수 있도록 분리한다.
2. SQL의 parse tree를 확인하여 탐색에 필요한 table, index를 선정한다.
3. 선정된 table과 index를 이용해 데이터를 가져온다.

이중 2에 해당하는 작업은 DB의 **옵티마이저가 쿼리 최적화 및 실행 계획을 수립**하는 단계이다.

이 과정에서 다음과 같은 일이 벌어진다.

- 불필요한 조건 제거, 복잡한 연산 단순화
- 여러개의 테이블 조인이 있을경우 어떠한 순서로 읽을지 결정
- 각 테이블에 사용된 조건과 인덱스 통계 정보를 이용해 사용할 인덱스 결정
- 가져온 레코드를 임시 테이블에 넣고 한번 더 가공 해야하는지 결정

> 통계정보?
>
> 이전에 인덱스가 레인지 스캔을 할지 테이블 풀 스캔을 할지 결정하기 위해서 인덱스를 사용 할 지 말지 결정하는 조건으로 사용되는 것을 알아 봤었다.

### 쿼리 실행 순서

---

FROM

ON  
JOIN

WHERE

---

GROUP BY   
HAVING

---

SELECT

---

DISTINCT

---

ORDER BY

---

LIMIT

---

ORDER BY와 GROUP BY의 경우 index를 이용할 결우 단계 자체가 불필요하기 때문에 삭제 된다.

