### [이거 참고하면 좋을 듯](https://d2.naver.com/helloworld/1230)



### JVM 이란? 

 JVM이란 자바 가상 머신으로 자바 어플리케이션을 클래스 로더를 통해 읽어 들여 자바 API와 함께 실행하는 것이다.
 그리고 JVM 플랫폼(OS + CPU) 의존성을 없애고 GC로 메모리 관리를 해주며 스택 기반의 가상 머신이다.
 (ARM 아키텍쳐 같은 하드웨어는 레지스터 기반으로 동작하지만 JVM은 스택 기반으로 동작한다.)

### JVM 실행 과정

  1. 프로그램이 실행되면 JVM은 OS로부터 이 프로그램이 필요로 하는 메모리를 할당받는다. JVM은 이 메모리를 용도에
     따라 여러 영역으로 나누어 관리한다.
  2. 자바 컴파일러 (javac)가 자바 소스코드(.java)를 읽어 들여 자바 바이트 코드(.class)로 변환시킨다.
  3. Class Loader를 통해 class 파일들을 JVM으로 로딩한다.
  4. 로딩된 class 파일들은 Execution engine을 통해 해석된다.
  5. 해석된 바이트 코드는 Runtime Data Areas에 배치되어 실질적인 수행이 이뤄진다.
     이러한 실행 과정 속에서 JVM은 필요에 따라 쓰레드 동기화와 GC같은 관리 작업을 수행한다.

### JVM 실행 과정 정리

  1. JVM이 메모리 할당 요청
  2. javac(컴파일러)가 자바 바이트 코드(.class) 파일로 변환
  3. 클래스 로더가 메모리에 적재
  4. class 파일들이 Execution engine을 통해 해석
  5. Runtime Data Areas에 배치되어 수행

 - 틈틈이 GC와 쓰레드 동기화 진행

 

## JVM 구성

### Class Loader(클래스 로더)

- JVM내로 클래스(.class파일)을 **로드하고**, **링크**를 통해 배치하는 작업을 수행하는 모듈이다.
- Runtime시에 동적으로 클래스 로드
- Jar 파일 내 저장된 클래스들을 JVM 위 탑재하고 사용하지 않는 클래스들은 메모리에서 삭제한다. (컴파일러 역할)
- 자바는 동적코드, 컴파일 타임이 아니라 **런타임에** 참조한다.
  - **컴파일 타임에도 Class Loader가 일하고 런타임에도 일하는 거라고 사료된다.**
  - 즉, 클래스를 처음으로 참조할 때 해당 클래스를 로드하고 링크한다.



### Excution Engine(실행 엔진)

- 클래스 실행시키는 역할
- 클래스 로더가 JVM 내의 런타임 데이터 영역에 바이트 코드를 배치 시키고 이것은 실행 엔진에 의해 실행된다.



### GC 

- GC를 수행하는 모듈 스레드가 존재한다.



### Runtime Data Area

- 프로그램 수행 위해 OS에게 할당 받은 메모리 공간



#### 쓰레드마다 존재하는 영역

1. PC Register
   - 쓰레드가 어떤 부분을 어떤 명령으로 실행해야할 지에 대한 기록
2. JVM 스택 영역
   - 메소드의 정보를 저장한다.
   - 메소드마다 각각의 프레임을 가진다.
   - 메소드가 끝나면 프레임 별로 삭제
3. Native method stack
   - 실제 기계어로 작성된 프로그램을 실행시키는 영역



### 쓰레드 공용

Method Area (=Class area = Static area), Heap은 GC할 때 정리해야징~ 쉽게 말하면 클래스 데이터를 위한 공간 Heap 영역은 객체를 위한 공간~



## 내 답변

### JVM에 대해 아는만큼 설명해라.

JVM이란 자바 가상 머신으로 자바 바이트 코드로 이뤄진 코드를 기계어로 변경시켜준다.

C 진영의 플랫폼(os + cpu)에 의존적인 컴파일을 해결하기 위해 나온 Java 진영의 컴파일러이다.

어떤 플랫폼에서도 JVM위에서 자바 코드를 해석하여 실행할 수 있다.

또한, GC로 메모리 관리도 해주며, 스택 기반의 가상 머신이다.

ARM 아키텍쳐 같은 하드웨어는 레지스터 기반으로 동작하는데 JVM은 스택 기반으로 동작한다.

### JVM이 레지스터를 사용하지 않고 스택을 사용하려한 이유 ? 

레지스터를 통한 변환이 더 쉽지만 굳이 레지스터를 사용하지 않은 이유는 레지스터를 몇개 사용하는 것만으로도 몇 개의 레지스터가
있어야만 실행 가능한 프로그램이 되어버리기 때문에, 즉, 하드웨어 의존성을 없애기 위함이다.
