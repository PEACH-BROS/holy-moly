# JVM에 대해 아는만큼 설명해주세요.

## JVM

자바 가상 머신으로 자바 바이트 코드(`.class`)를 OS에 특화된 코드로 변환하여 실행한다.  
OS에 특화된 코드로 변환하는 작업은 인터프리터와 JIT 컴파일러를 이용한다.

## 구조

![image](https://user-images.githubusercontent.com/13347548/83965962-7499a600-a8f2-11ea-828e-f95d70be01cc.png)

### 클래스 로더 시스템

`.class` 에서 바이트 코드를 읽어 메모리에 저장한다.

- 로딩 : class를 읽어오는 과정
- 링크 : class간의 레퍼런스를 연결하는 과정
- 초기화 : static 값의 초기화 및 변수에 할당하는 과정

### 메모리

메모리 영역은 클래스 수준의 정보를 저장, 공유한다.  
클래스 수준의 정보 : 클래스 이름, 부모 클래스의 이름, 메소드, 변수

- 스택 : 쓰레드 마다 런타임 스택을 만들고, 그 내부에 메소드 호출 스택을 스택 프레임이라는 이름으로 블럭을 쌓는다.  
  쓰레드가 종료되면 런타임 스택은 사라진다.
- PC 레지스터 : Program Counter, 쓰레드마다 현재 실행할 스택 프레임을 가리키는 포인터이다.
- 네이티브 메소드 스택 : 네이티브가 의미하는 것은 자바 외의 언어로 작성된 코드(C, C++)을 의미한다.  
  JNI를 통해 호출하는 코드를 수행하기 위한 스택이다.
- 힙 : 객체를 저장 공유한다.
- 메소드 : 공유 메모리 영역, 모든 쓰레드에게 공유가 된다. static 키워드가 붙은 자원들을 관리한다.  
  메소드의 바이트 코드 또한 같이 저장된다.

### 실행엔진

클래스 로더에 의해 로드된 바이트 코드를 실행하는 Runtime 모듈이다.

- 인터프리터 : 바이트 코드를 한 줄 씩 실행한다.
- JIT 컴파일러 : 인터프리터의 효율을 높여준다. 인터프리터가 반복되는 코드를 발견하면 JIT 컴파일러가 반복되는 코드를 네이티브 코드로 바꾸고 인터프리터가 미리 컴파일 된 코드를 사용한다.
- GC : 더 이상 참조되지 않는 객체의 메모리를 수거한다.

### JNI

자바 어플리케이션에서 C, C++로 작성된 함수를 사용할 수 있게 해준다.

### 네이티브 메소드 라이브러리

C, C++ 로 작성된 메소드 라이브러리이다.

