# 비밥의 원시타입 VS 참조타입

원시타입은 스택 메모리 영역에 존재한다.  
참조타입은 스택 메모리 영역에 힙 메모리에 대한 참조 값을 가지고 있고 실제 값은 힙 메모리 영역에 존재한다.  
따라서 원시타입을 사용하는것이 참조타입을 사용하는 것보다 성능상에 이점이 있다.

참조타입은 힙 메모리 영역에 저장되기때문에 GC의 수거 대상이 된다.

가장 중요한 차이점으로 생각하는것은 

**원시타입은 기본 값을 가진다**. 반면 **참조타입은 기본 값을 가지지 않고 null** 이 할당된다는 것이다.

이러한 차이점으로 인해 원시타입과 참조타입을 사용할 때 주의해야할 점이 있다.

Java를 이용한 웹 서비스를 운영할 때 Request, Response용 객체를 다룬다면  
해당 객체의 멤버변수, 다시말해 **인스턴스 변수는 참조타입을 쓰는 것이 안전하다**고 생각한다.

클라이언트에게 Request 객체를 받을 때 해당 객체에 인스턴스 변수가 원시타입이라면 어떠한 문제가 발생할 수 있을까?

간단한 예로 회원의 수정을 요청하는 Update용 객체가 있다고 가정해보자

```java
public class MemberUpdateRequest{
  private int memberId;
  private String name;
  ...
}
```

위와 같이 `memberId` 가 `Integer`와 같은 참조타입이 아닌 원시타입인 `int`로 되어있다면  
클라이언트에게서 `memberId` 가 누락된 채로 요청을 들어온다면 **기본값이 0인 채로 요청**을 받게 될 수 있다.  
즉, **수정을 요청한 사람이 아닌 `memberId` 가 0인 사람의 정보가 바뀌는 대박 장애가 발생**할 수 있다.

##### DB에 memeberId를 auto increment 로 설정하면 0이아닌 1부터 들어가지 않나?

DB에 `memberId`가 auto increment 로 설정이 되어 있다고 해서 `memberId`가 0인 회원을 insert할 수 없는것은 아니다.  
또한 DB의 auto increment가 1부터 시작한다는 것과 `memberId`가 0인 요청이 발생할 수 있다는 것은 전혀 다른 문제이기도 하다.

