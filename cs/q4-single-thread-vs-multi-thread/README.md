# 싱글 스레드와 멀티 스레드를 각각 어떤 상황에서 써야 할까요?

[엘리의 싱글 스레드 vs 멀티 스레드](elly-single-thread-vs-multi-thread.md)

[비밥의 싱글 스레드 vs 멀티 스레드](bebop.md)

[코일의 싱글 스레드 vs 멀티 스레드](coyle-multithread-vs-singlethread.md)

---

## JASON 이 말했다.

싱글 스레드 기반인지 멀티 스레드 기반인지는 **시작 지점**에서 **몇개의 스레드가 받아들이는지에 따라 다르다**.

모든 요청을 하나의 스레드가 먼저 받는다면 싱글스레드, 각각의 스레드가 받는다면 멀티스레드 구조가 된다.

### 성능차이?

작업의 성격과 **사용자 경험에 따라 다르다**.

싱글 스레드 어플리케이션과 멀티 스레드 어플리케이션의 환경 모두 가용한 스레드 수가 동일 하다고 가정하자.

싱글 스레드 이벤트 루프 기반의 어플리케이션(ex. NodeJS 기반)은 한 개의 스레드는 이벤트 루프로  
나머지 스레드는 작업을 위한 스레드로 사용한다.

![image](https://user-images.githubusercontent.com/13347548/84363022-1548d800-ac09-11ea-843f-7a5f7e0b8ed1.png)

멀티 스레드 기반의 어플리케이션은 하나의 요청당 하나의 스레드가 담당해서 처리하게 된다.

![image](https://user-images.githubusercontent.com/13347548/84363579-e848f500-ac09-11ea-9b1c-55cb77572f1e.png)

간단하게 요약해서 그려보면 다음과 같다.

![image](https://user-images.githubusercontent.com/13347548/84363404-aae46780-ac09-11ea-9e10-16985c01c505.png)

#### 이벤트 서버를 만든다고 가정해보자.

이벤트가 진행중인 경우 요청이 생성되는 속도가 요청을 처리하는 속도보다 매우 빠르다.

이러한 경우 이벤트 당첨 여부를 떠나서 이벤트 참여에 성공 했는지를 확인하는 사용자 경험이 더 중요하다.

따라서 처리속도가 느려질지라도 대용량 트래픽을 받아줄수 있는 서버를 구축해야한다.  
따라서 이벤트 큐에 요청을 받아두고 처리할 수 있는 양의 트래픽을 천천히 처리하는 것이 좋다.  

#### 하지만 이벤트 중이 아니라면?

이벤트가 진행 중이지 않은 경우 요청을 처리하는 속도가 요청이 생성되는 속도보다 빠르다.

들어오는 요청이 수용할 수 있는 범위에 있기 때문에 굳이 하나의 스레드를 이벤트 루프용으로 사용할 필요가 없다.  
이러한 경우에는 멀티 스레드 구조로 사용하는 것이 더 효율이 좋을 것이다.



> 참고

https://www.youtube.com/watch?v=MTSn93rNPPE

https://woowabros.github.io/experience/2016/11/28/woowahan_4one_event.html