# 서브넷에 대해 아는만큼 말해보세요~

[비밥의 서브넷](bebop.md)

[스티치의 서브넷](stitch.md)

[엘리의 서브넷](elly-subnet.md)

[sry의 서브넷](coyle-subnet.md)

## Classful Addressing

![image](https://user-images.githubusercontent.com/48052622/85593052-a8f6bb80-b681-11ea-9da5-e71d42b0095c.png)

서브넷에 대해 얘기하전에 IP 클래스를 먼저 짚고 넘어가자.

기존의 40억개의 ip주소 전체를 관리하기에 어려움이 있어서 주소를 class 단위로 나눠서 관리하는 방법이다.

이 **클래스 개념을 통해 IP 주소의 네트워크 영역과 호스트를 파악**할 수 있다.

| 클래스      | 최상위 비트 | 범위                      | 네트워크 비트 수 | 호스트 비트 수 | 네트워크 수     | 호스트 수        |
| ----------- | ----------- | ------------------------- | ---------------- | -------------- | --------------- | ---------------- |
| **Class A** | 0..         | 0.0.0.0 ~ 127.0.0.0       | 8                | 24             | 2^7 = 128       | 16,777,214(2^24) |
| **Class B** | 10..        | 128.0.0.0~191.255.0.0     | 16               | 16             | 16,384(2^14)    | 65,534(2^16)     |
| **Class C** | 110..       | 192.0.0.0~223.255.255.0   | 24               | 8              | 2,097,152(2^21) | 254(2^8)         |
| Class D     | 1110..      | 224.0.0.0~239.255.255.255 | N/A              | N/A            | N/A             | N/A              |
| Class E     | 1111..      | 240.0.0.0~255.255.255.255 | N/A              | N/A            | N/A             | N/A              |

### A 클래스

가장 왼쪽 첫 bit부터 8bit가 네트워크 아이디를 나타낸다.
나머지 24bit는 호스트 아이디이다.

또한 첫 비트는 **'0'으로 시작**해야하는 약속이 있기 때문에 가용한 네트워크의 bit를 계산하면 0~127까지 128가지의 네트워크 아이디가 존재한다.
이는 128곳에서 사용 할 수 있다는 의미이다.

마찬가지로 호스트는 2^24 인 16,777,216 개가 된다.

### B 클래스

첫 bit부터 16bit가 네트워크 아이디를 나타낸다.
나머지 16bit가 호스트 아이디이다.

첫 2개의 비트가 반드시 **'10'으로 시작**해야하기 때문에 가용한 네트워크의 bit는 14이고 16384개의 네트워크 아이디가 존재한다.

마찬가지로 호스트는 65,534개 사용가능하다.

### C 클래스

첫 bit부터 24bit가 네트워크 아이디를 나타낸다.
나머지 8bit가 호스트 아이디이다.

첫 3개의 비트가 반드시 '110'으로 시작해야한다.
따라서 가용한 네트워크 아이디는 2,097,152개이다.

마찬가지로 호스트는 254개 사용가능하다.

------

가장 첫 8bit를 보고 어떠한 클래스인지 판단 할 수 있다.

| A 클래스 | B 클래스  | C 클래스  |
| -------- | --------- | --------- |
| 0 ~ 127  | 128 ~ 191 | 192 ~ 223 |

## 서브넷

**IPv4 방식의 비효율성** 때문에 등장했다.

IP를 클래스 별로 할당을 하면 필요이상으로 할당을 해주기도, 부족하게 할당을 해주기도 하는 상황이 발생한다.

따라서 서브넷을 이용하여 필요한 양의 IP를 할당해주는 방식을 사용한다.



### 서브넷 마스크

![image](https://user-images.githubusercontent.com/19922698/85528384-c22e4680-b646-11ea-91e5-3a36b4cba1e0.png)

IP주소가 **네트워크 주소**와 **호스트 주소**로 나뉘었던 것 처럼 서브넷 마스크는 **호스트 주소**를 한 번 더 **서브넷 번호**와 **서브넷 네트워크에서 사용 할 호스트 번호**로 나누어 사용하게 해준다.

192.168.0.1/24 라고 되어 있을때 마지막에 `/24`가 나타내는 숫자를 보고 C클래스 서브넷 마스크를 사용했다는 사실을 눈치챌 수 있다.

그리고 24개의 bit를 모두 네트워크 영역으로 사용하고 있다고 생각하면된다.



이렇게 24개의 bit를 AND 연산을 하면 서브넷 네트워크를 구할수 있다.

192.168.0.1을 bit로 표현하면

11000000.10101000.00000000.00000001 이고 C클래스 기본 서브넷 마스크인 24를 비트로 풀면

11111111.11111111.11111111.00000000 이다. 이어서 AND 연산을 하면

11000000.10101000.00000000.00000000 이다. 이것이 서브넷 네트워크가 된다.



기본 서브넷 마스크만 사용한다면 의미가 없어 보일수 있으나 **B클래스에서 C클래스 서브넷 마스크를 사용한다면** 어떻게 될까?

C클래스의 서브넷 마스크는 24개의 bit를 네트워크 영역으로 할당하려 하고 B클래스는 16개의 bit를 네트워크 영역으로 사용하려 하는데 AND연산을 하면 24개의 bit가 기존 B클래스의 호스트 영역 bit까지 덮어쓰게되면서 **네트워크 영역을 늘리고 호스트 영역을 줄이는 효과**를 얻을 수 있다.

위 예시에서는 기본 서브넷 마스크만을 사용했지만 사용자가 만든 서브넷 마스크를 사용 할 수도 있다.
따라서 8, 16, 24 뿐이 아닌 25, 26과 같은 커스텀한 서브넷 마스크를 이용 할 수도 있다는 사실을 염두해야한다.
